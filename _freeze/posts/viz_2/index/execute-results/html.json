{
  "hash": "c59233ee2613c9733f32b08248086943",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Visualization 2: ggplot geom_bar()\"\nauthor: \"Maiko Hata\"\ndate: \"2025-02-28\"\ncategories: [visualization, code, analysis]\nimage: \"ggplot_geom_bar_cc.png\"\n---\n\n\n\nThis is the second part of my data visualization journey. For this, I used the same dataset as in the previous post, which showed racial representation in Early Intervention across the country. I compared that data to racial representation in Oregon, using information from the same [OSEP website](https://data.ed.gov/dataset/idea-section-618-data-products-static-tables-part-c). I combined data from 2013 to 2022 to get the most statistical power for later analysis.\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nFirst, I created a bar chart using `ggplot()` with the `geom_bar()` function.\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(childcount1920USOR_long, \n       aes(x = state, y = percent, fill = race)) +\n  geom_bar(stat = \"identity\") + \n  scale_y_continuous(labels = scales::percent_format(scale = 1)) + \n  scale_fill_discrete(labels = c(\"American Indian\")) +\n  labs(title = \"Percentage of Child Count by Race in US & Oregon\",\n       x = \"State\",\n       y = \"Percentage\",\n       fill = \"Race\") +\n  theme_minimal() \n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-7-1.png){width=672}\n:::\n:::\n\n\n\nHere is an example of how labeling can be completely inappropriate. However, I appreciate using the viridis color palette with `scale_fill_viridis_d()`, as it helps make colors more accessible for people with color perception differences. I also included labels for the different groups to show the color scheme more clearly.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(childcount1920USOR_long, aes(x = state, y = percent, fill = race)) +\n  geom_bar(stat = \"identity\") + \n  scale_fill_viridis_d() +  \n  scale_y_continuous(labels = percent_format(scale = 1)) +\n  labs(title = \"Percentage of Child Count by Race in US & Oregon\",\n       x = \"State\",\n       y = \"Percentage\",\n       fill = \"Race\") +\n  geom_text(aes(label = race), \n            position = position_stack(vjust = 0.5), \n            color = \"black\", \n            size = 4) +\n  theme_minimal()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-8-1.png){width=672}\n:::\n:::\n\n\n\nI really enjoy how easy it is to play with different types of plots that `ggplot()` offers - all it takes is just minor changes to the codes.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(childcount1920USOR_long, aes(x = state, y = percent, fill = race)) +\n  geom_bar(stat = \"identity\", position = \"dodge\") +  \n  scale_fill_viridis_d() +  \n  scale_y_continuous(labels = percent_format(scale = 1)) +  \n  labs(title = \"Percentage of Child Count by Race in US & Oregon\",\n       x = \"State\",\n       y = \"Percentage\",\n       fill = \"Race\") +\n  theme_minimal() \n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-9-1.png){width=672}\n:::\n:::\n\n\n\nSo, I kept experimenting.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(childcount1920USOR_long, \n       aes(x = race, \n           y = percent, \n           fill = state)) +\n  geom_bar(stat = \"identity\", \n           position = position_dodge(width = 0.7)) +  \n  scale_fill_viridis_d() +  \n  scale_y_continuous(\n    labels = percent_format(scale = 1), \n    expand = expansion(mult = c(0, 0.05))) +\n  labs(title = \"Percentage of Child Count by Race in US & Oregon\",\n       x = \"Race\",\n       y = \"Percentage\",\n       fill = \"State\") +\n  geom_text(aes(label = scales::percent(percent / 100, accuracy = 0.1)), \n            position = position_dodge(width = 0.7), \n            vjust = -0.5,  \n            color = \"black\", \n            size = 4) +\n  theme_minimal(base_size = 14) +\n  theme(legend.position = \"bottom\")  \n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-10-1.png){width=672}\n:::\n:::\n\n\n\nAfter making adjustments to show the data more clearly and accurately, here it isâ€”the final version that shows the data best! Flipping the X and Y axes helps readers understand the categories more easily, and the data labels make it clearer to see the exact differences between the national data and Oregon's data. I also used the Okabe-Ito color palette, assigning specific colors for both the national data and Oregon's data to maintain consistency in future visualizations.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n okabe_ito_colors <- c(\n  \"US and Outlying Areas\" = pal_aaas(\"default\")(10)[6],      \n  \"Oregon\" = pal_aaas(\"default\")(10)[3])\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(childcount1920USOR_long, \n       aes(x = percent, \n           y = race, \n           fill = state)) + \n  geom_bar(stat = \"identity\", \n           position = position_dodge(\n          width = 0.7)) +  \n  scale_fill_manual(\n    values = okabe_ito_colors, \n    breaks = c(\"US and Outlying Areas\", \"Oregon\"),         \n    labels = c(\"US and Outlying Areas\", \"Oregon\")          \n  ) +\n  scale_x_continuous(\n    labels = percent_format(scale = 1), \n    expand = expansion(mult = c(0, 0.05))) +\n  labs(\n    title = \"Percentage of Child Count by Race in US & Oregon\",\n    x = \"Percentage\",\n    y = \"Race\",\n    fill = NULL) +\n  geom_text(aes(\n    label = scales::percent(percent / 100, accuracy = 0.1)), \n    position = position_dodge(width = 0.7), \n    hjust = -0.2,  \n    color = \"black\", \n    size = 4) +  \n  theme_minimal(base_size = 14) +\n  theme(\n    legend.position = \"bottom\"\n  )\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-12-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nviridis_colors <- c(\n  \"Oregon\" = \"#414487\",               \n  \"US and Outlying Areas\" = \"#7ad151\") \n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(childcount1920USOR_long, \n       aes(x = percent, \n           y = race, \n           fill = state)) + \n  geom_bar(stat = \"identity\",\n           position = position_dodge(\n          width = 0.7)) +  \n  scale_fill_manual(\n    values = viridis_colors, \n    breaks = c(\"US and Outlying Areas\", \"Oregon\"),         \n    labels = c(\"US and Outlying Areas\", \"Oregon\")          \n  ) +\n  scale_x_continuous(\n    labels = percent_format(scale = 1), \n    expand = expansion(mult = c(0, 0.05))) +\n  labs(\n    title = \"Racial Representation of Children in EI\",\n    x = \"Percentage\",\n    y = \"Race\",\n    fill = NULL) +\n  geom_text(aes(\n    label = scales::percent(percent / 100, accuracy = 0.1)), \n    position = position_dodge(width = 0.7), \n    hjust = -0.2,  \n    color = \"black\", \n    size = 4) +  \n  theme_minimal(base_size = 14) +\n  theme(\n    legend.position = \"bottom\"\n  )\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-14-1.png){width=672}\n:::\n:::\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script src=\"../../site_libs/kePrint-0.0.1/kePrint.js\"></script>\n<link href=\"../../site_libs/lightable-0.0.1/lightable.css\" rel=\"stylesheet\" />\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}